<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>IFI - TP 5 - GUI - MVC &amp; Templating</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>IFI - TP 5 - GUI - MVC &amp; Templating</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_présentation_et_objectifs">1. Présentation et objectifs</a></li>
<li><a href="#_github">2. Github</a></li>
<li><a href="#_le_pom_xml">3. Le <code>pom.xml</code></a></li>
<li><a href="#_la_première_vue">4. La première vue !</a>
<ul class="sectlevel2">
<li><a href="#_le_controlleur_index">4.1. Le controlleur index</a>
<ul class="sectlevel3">
<li><a href="#_le_test_unitaire">4.1.1. Le test unitaire</a></li>
<li><a href="#_limplémentation">4.1.2. L&#8217;implémentation</a></li>
</ul>
</li>
<li><a href="#_ajout_du_moteur_de_template">4.2. Ajout du moteur de template</a></li>
<li><a href="#_ajout_du_template">4.3. Ajout du template !</a></li>
<li><a href="#_lapplication">4.4. L&#8217;application</a></li>
</ul>
</li>
<li><a href="#_améliorer_lindex">5. Améliorer l&#8217;index</a>
<ul class="sectlevel2">
<li><a href="#_servir_des_ressources_statiques">5.1. Servir des ressources statiques</a></li>
<li><a href="#_ajouter_un_formulaire">5.2. Ajouter un formulaire</a></li>
<li><a href="#_les_impacts_sur_le_controlleur">5.3. Les impacts sur le controlleur</a>
<ul class="sectlevel3">
<li><a href="#_les_tests_unitaires">5.3.1. Les tests unitaires</a></li>
<li><a href="#_limplémentation_2">5.3.2. L&#8217;implémentation</a></li>
<li><a href="#_le_nouveau_template">5.3.3. Le nouveau template</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_ajouter_du_layouting">6. Ajouter du layouting</a>
<ul class="sectlevel2">
<li><a href="#_le_header">6.1. Le header</a></li>
<li><a href="#_linclusion">6.2. L&#8217;inclusion</a></li>
</ul>
</li>
<li><a href="#_se_connecter_aux_micro_services">7. Se connecter aux micro-services</a>
<ul class="sectlevel2">
<li><a href="#_déploiement_chez_heroku_du_tp_3">7.1. Déploiement chez Heroku du TP 3</a>
<ul class="sectlevel3">
<li><a href="#_configuration_de_votre_application">7.1.1. Configuration de votre application</a></li>
<li><a href="#_déploiement_de_votre_application">7.1.2. Déploiement de votre application</a></li>
</ul>
</li>
<li><a href="#_le_business_object">7.2. Le business object</a></li>
<li><a href="#_le_service">7.3. Le service</a>
<ul class="sectlevel3">
<li><a href="#_linterface_pokemonservice">7.3.1. L&#8217;interface PokemonService</a></li>
<li><a href="#_le_test_unitaire_2">7.3.2. Le test unitaire</a></li>
<li><a href="#_limplémentation_3">7.3.3. L&#8217;implémentation</a></li>
</ul>
</li>
<li><a href="#_le_test_dintégration">7.4. Le test d&#8217;intégration</a></li>
<li><a href="#_la_configuration">7.5. La configuration</a>
<ul class="sectlevel3">
<li><a href="#_le_resttemplate">7.5.1. Le RestTemplate</a></li>
<li><a href="#_linjection_des_properties">7.5.2. L&#8217;injection des properties</a></li>
</ul>
</li>
<li><a href="#_le_controlleur">7.6. Le controlleur</a>
<ul class="sectlevel3">
<li><a href="#_le_test_unitaire_3">7.6.1. Le test unitaire</a></li>
<li><a href="#_limplémentation_4">7.6.2. L&#8217;implémentation</a></li>
<li><a href="#_le_template">7.6.3. Le template</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_pour_aller_plus_loin">8. Pour aller plus loin</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_présentation_et_objectifs"><a class="anchor" href="#_présentation_et_objectifs"></a><a class="link" href="#_présentation_et_objectifs">1. Présentation et objectifs</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le but est de continuer le développement de notre architecture "à la microservice".</p>
</div>
<div class="paragraph">
<p>Nous allons aujourd&#8217;hui développer la WEB-UI de gestion des dresseurs de Pokemon.</p>
</div>
<div class="paragraph">
<p>Ce micro-service se connectera au micro service de pokemon management et trainer management!</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/trainer-gui.png" alt="trainer gui">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On ressemble de plus en plus à une architecture micro-service, comme celle d&#8217;UBER !</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Nous allons développer :</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>deux repositories, qui accèdent aux données de trainer management et pokemon management</p>
</li>
<li>
<p>un service d&#8217;accès aux données</p>
</li>
<li>
<p>annoter ces composants avec les annotations de Spring et les tester</p>
</li>
<li>
<p>créer un controlleur spring pour gérer nos requêtes HTTP / REST</p>
</li>
<li>
<p>créer des templates pour afficher nos données</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Nous repartons de zéro pour ce TP !</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_github"><a class="anchor" href="#_github"></a><a class="link" href="#_github">2. Github</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Identifiez vous sur Github, et cliquez sur le lien suivant pour créer votre repository git: <a href="https://classroom.github.com/a/-VsZH0Xr" target="_blank" rel="noopener">Github classroom</a></p>
</div>
<div class="paragraph">
<p>Clonez ensuite votre repository git sur votre poste !</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A partir de ce TP, votre repository nouvellement créé contiendra un squelette de projet contenant:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un fichier <code>pom.xml</code> basique</p>
</li>
<li>
<p>l&#8217;arborescence projet:</p>
<div class="ulist">
<ul>
<li>
<p><code>src/main/java</code></p>
</li>
<li>
<p><code>src/main/resources</code></p>
</li>
<li>
<p><code>src/test/java</code></p>
</li>
<li>
<p><code>src/test/resources</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/arbo.png" alt="arbo">
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_pom_xml"><a class="anchor" href="#_le_pom_xml"></a><a class="link" href="#_le_pom_xml">3. Le <code>pom.xml</code></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modifiez le fichier pom.xml à la racine du projet</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="xml"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></div></td><td class="code"><pre><span></span><span class="tok-nt">&lt;project&gt;</span>
    <span class="tok-nt">&lt;modelVersion&gt;</span>4.0.0<span class="tok-nt">&lt;/modelVersion&gt;</span>
    <span class="tok-nt">&lt;groupId&gt;</span>com.ifi.tp<span class="tok-nt">&lt;/groupId&gt;</span>
    <span class="tok-nt">&lt;artifactId&gt;</span>trainer-ui<span class="tok-nt">&lt;/artifactId&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tok-nt">&lt;version&gt;</span>0.1.0<span class="tok-nt">&lt;/version&gt;</span>
    <span class="tok-nt">&lt;packaging&gt;</span>jar<span class="tok-nt">&lt;/packaging&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="tok-nt">&lt;parent&gt;</span>
        <span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
        <span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="tok-nt">&lt;/artifactId&gt;</span>
        <span class="tok-nt">&lt;version&gt;</span>2.2.1.RELEASE<span class="tok-nt">&lt;/version&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tok-nt">&lt;/parent&gt;</span>

    <span class="tok-nt">&lt;properties&gt;</span>
        <span class="tok-nt">&lt;maven.compiler.source&gt;</span>11<span class="tok-nt">&lt;/maven.compiler.source&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="tok-nt">&lt;maven.compiler.target&gt;</span>11<span class="tok-nt">&lt;/maven.compiler.target&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tok-nt">&lt;/properties&gt;</span>

    <span class="tok-nt">&lt;dependencies&gt;</span>

        <span class="tok-c">&lt;!-- spring-boot web--&gt;</span>
        <span class="tok-nt">&lt;dependency&gt;</span>
            <span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
            <span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="tok-nt">&lt;/artifactId&gt;</span>
        <span class="tok-nt">&lt;/dependency&gt;</span>

        <span class="tok-c">&lt;!-- testing --&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="tok-nt">&lt;dependency&gt;</span>
            <span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
            <span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="tok-nt">&lt;/artifactId&gt;</span>
        <span class="tok-nt">&lt;/dependency&gt;</span>
    <span class="tok-nt">&lt;/dependencies&gt;</span>

     <span class="tok-nt">&lt;build&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="tok-nt">&lt;plugins&gt;</span>
            <span class="tok-nt">&lt;plugin&gt;</span>
                <span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
                <span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
            <span class="tok-nt">&lt;/plugin&gt;</span>
        <span class="tok-nt">&lt;/plugins&gt;</span>
        <span class="tok-nt">&lt;pluginManagement&gt;</span>
            <span class="tok-nt">&lt;plugins&gt;</span>
                <span class="tok-nt">&lt;plugin&gt;</span>
                    <span class="tok-nt">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
                    <span class="tok-nt">&lt;version&gt;</span>2.22.2<span class="tok-nt">&lt;/version&gt;</span>
                <span class="tok-nt">&lt;/plugin&gt;</span>
            <span class="tok-nt">&lt;/plugins&gt;</span>
        <span class="tok-nt">&lt;/pluginManagement&gt;</span>
    <span class="tok-nt">&lt;/build&gt;</span>

<span class="tok-nt">&lt;/project&gt;</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Modifiez votre <code>artifactId</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Cette fois, on utilise directement <code>spring-boot</code> pour construire un <code>jar</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>en java 11&#8230;&#8203;</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>On positionne <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html" target="_blank" rel="noopener">spring-boot-starter-test</a></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>La partie build utilise le <code>spring-boot-maven-plugin</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Pour préparer les développements, on va également tout de suite créer quelques
packages Java qui vont matérialiser notre architecture applicative.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Cette architecture est maintenant habituelle pour vous!
C&#8217;est l&#8217;architecture que l&#8217;on retrouve sur de nombreux projets</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Créer les packages suivants:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.ifi.trainer_ui.controller</code> : va contenir les controlleurs MVC de notre application</p>
</li>
<li>
<p><code>com.ifi.trainer_ui.config</code> : va contenir la configuration de notre application</p>
</li>
<li>
<p><code>com.ifi.trainer_ui.pokemonTypes</code> : va contenir les classes liés aux pokemons (bo et services)</p>
</li>
<li>
<p><code>com.ifi.trainer_ui.trainers</code> : va contenir les classes liés aux dresseurs (bo et services)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Notre GUI va manipuler des concepts de plusieurs domaines métier (Trainer et Pokemon). Nous nous allons donc organiser
notre application pour refléter ces domaines.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/packages.png" alt="packages">
</div>
<div class="title">Figure 1. Les packages Java de notre application</div>
</div>
<div class="paragraph">
<p>Notre projet est prêt :</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_la_première_vue"><a class="anchor" href="#_la_première_vue"></a><a class="link" href="#_la_première_vue">4. La première vue !</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_le_controlleur_index"><a class="anchor" href="#_le_controlleur_index"></a><a class="link" href="#_le_controlleur_index">4.1. Le controlleur index</a></h3>
<div class="paragraph">
<p>Nous allons développer un <code>Controlleur</code> simple qui servira notre page d&#8217;index !</p>
</div>
<div class="sect3">
<h4 id="_le_test_unitaire"><a class="anchor" href="#_le_test_unitaire"></a><a class="link" href="#_le_test_unitaire">4.1.1. Le test unitaire</a></h4>
<div class="paragraph">
<p>Implémentez le test unitaire suivant :</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.controller.IndexControllerTest.java</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><pre><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.ifi.trainer_ui.controller</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.junit.jupiter.api.Test</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.stereotype.Controller</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.web.bind.annotation.GetMapping</span><span class="tok-o">;</span>

<span class="tok-kn">import static</span> <span class="tok-nn">org.junit.jupiter.api.Assertions.*</span><span class="tok-o">;</span>

<span class="tok-kd">class</span> <span class="tok-nc">IndexControllerTest</span> <span class="tok-o">{</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">controllerShouldBeAnnotated</span><span class="tok-o">(){</span>
        <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">IndexController</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">.</span><span class="tok-na">getAnnotation</span><span class="tok-o">(</span><span class="tok-n">Controller</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">index_shouldReturnTheNameOfTheIndexTemplate</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">var</span> <span class="tok-n">indexController</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">IndexController</span><span class="tok-o">();</span>
        <span class="tok-n">var</span> <span class="tok-n">viewName</span> <span class="tok-o">=</span> <span class="tok-n">indexController</span><span class="tok-o">.</span><span class="tok-na">index</span><span class="tok-o">();</span>

        <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;index&quot;</span><span class="tok-o">,</span> <span class="tok-n">viewName</span><span class="tok-o">);</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">index_shouldBeAnnotated</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">NoSuchMethodException</span> <span class="tok-o">{</span>
        <span class="tok-n">var</span> <span class="tok-n">indexMethod</span> <span class="tok-o">=</span> <span class="tok-n">IndexController</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">.</span><span class="tok-na">getMethod</span><span class="tok-o">(</span><span class="tok-s">&quot;index&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">var</span> <span class="tok-n">getMapping</span> <span class="tok-o">=</span> <span class="tok-n">indexMethod</span><span class="tok-o">.</span><span class="tok-na">getAnnotation</span><span class="tok-o">(</span><span class="tok-n">GetMapping</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>

        <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">getMapping</span><span class="tok-o">);</span>
        <span class="tok-n">assertArrayEquals</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">String</span><span class="tok-o">[]{</span><span class="tok-s">&quot;/&quot;</span><span class="tok-o">},</span> <span class="tok-n">getMapping</span><span class="tok-o">.</span><span class="tok-na">value</span><span class="tok-o">());</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tok-o">}</span>
<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>notre controller doit être annoté <code>@Controller</code> (à ne pas confondre avec <code>@RestController</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>si le retour de la méthode du controlleur est une chaîne de caractères, cette chaîne sera utilisée pour trouver la vue à afficher</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>on écoute les requêtes arrivant à <code>/</code></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_limplémentation"><a class="anchor" href="#_limplémentation"></a><a class="link" href="#_limplémentation">4.1.2. L&#8217;implémentation</a></h4>
<div class="paragraph">
<p>Implémentez la classe IndexController !</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.controller.IndexController.java</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><pre><span></span><span class="tok-c1">// TODO</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">IndexController</span> <span class="tok-o">{</span>

    <span class="tok-c1">// TODO</span>
    <span class="tok-n">String</span> <span class="tok-nf">index</span><span class="tok-o">(){</span>
        <span class="tok-k">return</span> <span class="tok-s">&quot;&quot;</span><span class="tok-o">;</span> <span class="tok-c1">// TODO</span>
    <span class="tok-o">}</span>

<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ajout_du_moteur_de_template"><a class="anchor" href="#_ajout_du_moteur_de_template"></a><a class="link" href="#_ajout_du_moteur_de_template">4.2. Ajout du moteur de template</a></h3>
<div class="paragraph">
<p>Nous allons utiliser le moteur de template <code>Mustache</code>.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, ajoutez la dépendance suivante dans votre pom.xml</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="xml"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><pre><span></span><span class="tok-nt">&lt;dependency&gt;</span>
    <span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
    <span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-starter-mustache<span class="tok-nt">&lt;/artifactId&gt;</span>
<span class="tok-nt">&lt;/dependency&gt;</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Par défaut, les templates <code>Mustache</code> :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>sont positionnés dans un répertoire du classpath <code>/templates</code> (donc dans <code>src/main/resources/templates</code>, puisque Maven ajoute <code>src/main/resources</code> au classpath).</p>
</li>
<li>
<p>sont des fichiers nommés <code>.mustache</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les propriétés disponibles sont détaillées dans <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html">la documentation Spring</a></p>
</div>
<div class="paragraph">
<p>Nous allons modifier le suffixe des fichiers de template, pour être <code>.html</code>.</p>
</div>
<div class="paragraph">
<p>Créez le fichier <code>src/main/resources/application.properties</code> et ajoutez y les propriétés suivantes.</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.properties</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="properties"><span></span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-na">spring.mustache.prefix</span><span class="tok-o">=</span><span class="tok-s">classpath:/templates/</span>
<i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-na">spring.mustache.suffix</span><span class="tok-o">=</span><span class="tok-s">.html</span>
<i class="conum" data-value="3"></i><b>(3)</b>
<span class="tok-na">server.port</span><span class="tok-o">=</span><span class="tok-s">9000</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>On garde ici la valeur par défaut.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>On modifie la propriété pour prendre en compte les fichiers <code>.html</code> au lieu de <code>.mustache</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>on en profite pour demander à Spring d&#8217;écouter sur le port 9000 !</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ajout_du_template"><a class="anchor" href="#_ajout_du_template"></a><a class="link" href="#_ajout_du_template">4.3. Ajout du template !</a></h3>
<div class="paragraph">
<p>Nous pouvons enfin ajouter notre template de page d&#8217;accueil !</p>
</div>
<div class="paragraph">
<p>Créer le fichier <code>src/main/resources/templates/index.html</code></p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/templates/index.html</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="html"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><pre><span></span><span class="tok-cp">&lt;!doctype html&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-p">&lt;</span><span class="tok-nt">html</span> <span class="tok-na">lang</span><span class="tok-o">=</span><span class="tok-s">&quot;en&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">head</span><span class="tok-p">&gt;</span>
    <span class="tok-c">&lt;!-- Required meta tags --&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">meta</span> <span class="tok-na">charset</span><span class="tok-o">=</span><span class="tok-s">&quot;utf-8&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">meta</span> <span class="tok-na">name</span><span class="tok-o">=</span><span class="tok-s">&quot;viewport&quot;</span> <span class="tok-na">content</span><span class="tok-o">=</span><span class="tok-s">&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">title</span><span class="tok-p">&gt;</span>Pokemon Trainer<span class="tok-p">&lt;/</span><span class="tok-nt">title</span><span class="tok-p">&gt;</span>

    <span class="tok-c">&lt;!-- Bootstrap CSS --&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tok-p">&lt;</span><span class="tok-nt">link</span> <span class="tok-na">rel</span><span class="tok-o">=</span><span class="tok-s">&quot;stylesheet&quot;</span> <span class="tok-na">href</span><span class="tok-o">=</span><span class="tok-s">&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&quot;</span> <span class="tok-na">integrity</span><span class="tok-o">=</span><span class="tok-s">&quot;sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS&quot;</span> <span class="tok-na">crossorigin</span><span class="tok-o">=</span><span class="tok-s">&quot;anonymous&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;/</span><span class="tok-nt">head</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">body</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;container&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&lt;</span><span class="tok-nt">h1</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;pt-md-5 pb-md-5&quot;</span><span class="tok-p">&gt;</span>Pokemon Trainer<span class="tok-p">&lt;/</span><span class="tok-nt">h1</span><span class="tok-p">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>

<span class="tok-p">&lt;/</span><span class="tok-nt">body</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;/</span><span class="tok-nt">html</span><span class="tok-p">&gt;</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>On crée une page HTML</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>en important les CSS de Bootstrap par exemple</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>On affiche un titre !</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_lapplication"><a class="anchor" href="#_lapplication"></a><a class="link" href="#_lapplication">4.4. L&#8217;application</a></h3>
<div class="paragraph">
<p>Créez enfin la classe d&#8217;application Spring</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.PokemonUI.java</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><pre><span></span><span class="tok-nd">@SpringBootApplication</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PokemonUI</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">...</span> <span class="tok-n">args</span><span class="tok-o">){</span>
        <span class="tok-n">SpringApplication</span><span class="tok-o">.</span><span class="tok-na">run</span><span class="tok-o">(</span><span class="tok-n">PokemonUI</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">,</span> <span class="tok-n">args</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Notre classe d&#8217;application est tout à fait classique</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Démarrez votre application et allez consulter le résultat sur <a href="http://localhost:9000" class="bare" target="_blank" rel="noopener">http://localhost:9000</a> !</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_améliorer_lindex"><a class="anchor" href="#_améliorer_lindex"></a><a class="link" href="#_améliorer_lindex">5. Améliorer l&#8217;index</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous allons rendre cette première page un peu plus vivante en ajoutant une image, ainsi qu&#8217;un formulaire de saisie.</p>
</div>
<div class="sect2">
<h3 id="_servir_des_ressources_statiques"><a class="anchor" href="#_servir_des_ressources_statiques"></a><a class="link" href="#_servir_des_ressources_statiques">5.1. Servir des ressources statiques</a></h3>
<div class="paragraph">
<p>Par défaut, spring est capable de servir des ressources statiques.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, il suffit de les placer au bon endroit !</p>
</div>
<div class="paragraph">
<p>Télécharger l&#8217;image <a href="images/chen.png" target="_blank" rel="noopener">chen.png</a> et placez la dans le répertoire <code>src/main/resources/static/images</code> ou <code>src/main/resources/public/images</code></p>
</div>
<div class="paragraph">
<p>Le positionnement des ressources statiques est paramétrable à l&#8217;aide de l&#8217;application.properties :</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="properties"><span></span><span class="tok-c"># Path pattern used for static resources. </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-na">spring.mvc.static-path-pattern</span><span class="tok-o">=</span><span class="tok-s">/**</span>
<span class="tok-c"># Locations of static resources. </span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-na">spring.resources.static-locations</span><span class="tok-o">=</span><span class="tok-s">classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Ce paramétrage indique que l&#8217;ensemble des requêtes entrantes peut être une ressource statique !</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Et on indique à spring dans quels répertoires il doit chercher les ressources !</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ajouter_un_formulaire"><a class="anchor" href="#_ajouter_un_formulaire"></a><a class="link" href="#_ajouter_un_formulaire">5.2. Ajouter un formulaire</a></h3>
<div class="paragraph">
<p>Ajoutons un formulaire à notre page d&#8217;index (sous le titre) :</p>
</div>
<div class="listingblock">
<div class="title">index.html</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="html"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><pre><span></span> <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;row&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">img</span>  <span class="tok-na">src</span><span class="tok-o">=</span><span class="tok-s">&quot;/images/chen.png&quot;</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;col-md-2&quot;</span><span class="tok-p">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;row col-md-10&quot;</span><span class="tok-p">&gt;</span>

        <span class="tok-p">&lt;</span><span class="tok-nt">blockquote</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;blockquote&quot;</span><span class="tok-p">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
            Hello there!
            Welcome to the world of Pokémon!
            My name is Oak! People call me the Pokémon Prof!
            This world is inhabited by creatures called Pokémon!
            For some people, Pokémon are pets. Other use them for fights.
            Myself… I study Pokémon as a profession. First, what is your name?
        <span class="tok-p">&lt;/</span><span class="tok-nt">blockquote</span><span class="tok-p">&gt;</span>

        <span class="tok-p">&lt;</span><span class="tok-nt">form</span> <span class="tok-na">action</span><span class="tok-o">=</span><span class="tok-s">&quot;/registerTrainer&quot;</span> <span class="tok-na">method</span><span class="tok-o">=</span><span class="tok-s">&quot;post&quot;</span><span class="tok-p">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;form-group&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">&lt;</span><span class="tok-nt">label</span> <span class="tok-na">for</span><span class="tok-o">=</span><span class="tok-s">&quot;trainerName&quot;</span><span class="tok-p">&gt;</span>Trainer name<span class="tok-p">&lt;/</span><span class="tok-nt">label</span><span class="tok-p">&gt;</span>
                <span class="tok-p">&lt;</span><span class="tok-nt">input</span> <span class="tok-na">type</span><span class="tok-o">=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;form-control&quot;</span> <span class="tok-na">id</span><span class="tok-o">=</span><span class="tok-s">&quot;trainerName&quot;</span> <span class="tok-na">name</span><span class="tok-o">=</span><span class="tok-s">&quot;trainerName&quot;</span> <span class="tok-na">aria-describedby</span><span class="tok-o">=</span><span class="tok-s">&quot;trainerHelp&quot;</span> <span class="tok-na">placeholder</span><span class="tok-o">=</span><span class="tok-s">&quot;Enter your name&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">&lt;</span><span class="tok-nt">small</span> <span class="tok-na">id</span><span class="tok-o">=</span><span class="tok-s">&quot;trainerHelp&quot;</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;form-text text-muted&quot;</span><span class="tok-p">&gt;</span>This will be your name in the game !<span class="tok-p">&lt;/</span><span class="tok-nt">small</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&lt;</span><span class="tok-nt">button</span> <span class="tok-na">type</span><span class="tok-o">=</span><span class="tok-s">&quot;submit&quot;</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;btn btn-primary&quot;</span><span class="tok-p">&gt;</span>Submit<span class="tok-p">&lt;/</span><span class="tok-nt">button</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&lt;/</span><span class="tok-nt">form</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>

<span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Nous ajoutons notre ressource statique.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>le discours d&#8217;introduction original du Professeur Chen dans Pokémon Bleu et Rouge !</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Un formulaire de création de dresseur !</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Notez comme la ressource statique est référencée par <code>/images/chen.png</code>, et qu&#8217;elle est positionnée dans le répertoire <code>src/main/resources/static/images/chen.png</code>.
Spring utilise le répertoire paramétré comme base de recherche, les sous-répertoires sont parcourus également !</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_les_impacts_sur_le_controlleur"><a class="anchor" href="#_les_impacts_sur_le_controlleur"></a><a class="link" href="#_les_impacts_sur_le_controlleur">5.3. Les impacts sur le controlleur</a></h3>
<div class="paragraph">
<p>Notre controlleur va devoir proposer une méthode supplémentaire capable de gérer la soumission du formulaire.</p>
</div>
<div class="sect3">
<h4 id="_les_tests_unitaires"><a class="anchor" href="#_les_tests_unitaires"></a><a class="link" href="#_les_tests_unitaires">5.3.1. Les tests unitaires</a></h4>
<div class="paragraph">
<p>Ajouter les tests unitaires suivants :</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.controller.IndexControllerTest.java</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><pre><span></span><span class="tok-nd">@Test</span>
<span class="tok-kt">void</span> <span class="tok-nf">registerNewTrainer_shouldReturnAModelAndView</span><span class="tok-o">(){</span>
    <span class="tok-n">var</span> <span class="tok-n">indexController</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">IndexController</span><span class="tok-o">();</span>
    <span class="tok-n">var</span> <span class="tok-n">modelAndView</span> <span class="tok-o">=</span> <span class="tok-n">indexController</span><span class="tok-o">.</span><span class="tok-na">registerNewTrainer</span><span class="tok-o">(</span><span class="tok-s">&quot;Blue&quot;</span><span class="tok-o">);</span>

    <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">modelAndView</span><span class="tok-o">);</span>
    <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;register&quot;</span><span class="tok-o">,</span> <span class="tok-n">modelAndView</span><span class="tok-o">.</span><span class="tok-na">getViewName</span><span class="tok-o">());</span>
    <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;Blue&quot;</span><span class="tok-o">,</span> <span class="tok-n">modelAndView</span><span class="tok-o">.</span><span class="tok-na">getModel</span><span class="tok-o">().</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;name&quot;</span><span class="tok-o">));</span>
<span class="tok-o">}</span>

<span class="tok-nd">@Test</span>
<span class="tok-kt">void</span> <span class="tok-nf">registerNewTrainer_shouldBeAnnotated</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">NoSuchMethodException</span> <span class="tok-o">{</span>
    <span class="tok-n">var</span> <span class="tok-n">registerMethod</span> <span class="tok-o">=</span> <span class="tok-n">IndexController</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">.</span><span class="tok-na">getDeclaredMethod</span><span class="tok-o">(</span><span class="tok-s">&quot;registerNewTrainer&quot;</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>
    <span class="tok-n">var</span> <span class="tok-n">getMapping</span> <span class="tok-o">=</span> <span class="tok-n">registerMethod</span><span class="tok-o">.</span><span class="tok-na">getAnnotation</span><span class="tok-o">(</span><span class="tok-n">PostMapping</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>

    <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">getMapping</span><span class="tok-o">);</span>
    <span class="tok-n">assertArrayEquals</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">String</span><span class="tok-o">[]{</span><span class="tok-s">&quot;/registerTrainer&quot;</span><span class="tok-o">},</span> <span class="tok-n">getMapping</span><span class="tok-o">.</span><span class="tok-na">value</span><span class="tok-o">());</span>
<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_limplémentation_2"><a class="anchor" href="#_limplémentation_2"></a><a class="link" href="#_limplémentation_2">5.3.2. L&#8217;implémentation</a></h4>
<div class="paragraph">
<p>Implémenter la nouvelle méthode de l&#8217;IndexController</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.controller.IndexController.java</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><pre><span></span><span class="tok-nd">@Controller</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">IndexController</span> <span class="tok-o">{</span>

    <span class="tok-nd">@GetMapping</span><span class="tok-o">(</span><span class="tok-s">&quot;/&quot;</span><span class="tok-o">)</span>
    <span class="tok-n">String</span> <span class="tok-nf">index</span><span class="tok-o">(){</span>
        <span class="tok-k">return</span> <span class="tok-s">&quot;index&quot;</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-c1">// TODO</span>
    <span class="tok-n">ModelAndView</span> <span class="tok-nf">registerNewTrainer</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">trainerName</span><span class="tok-o">){</span>
        <span class="tok-c1">// TODO</span>
    <span class="tok-o">}</span>

<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_le_nouveau_template"><a class="anchor" href="#_le_nouveau_template"></a><a class="link" href="#_le_nouveau_template">5.3.3. Le nouveau template</a></h4>
<div class="paragraph">
<p>Nous allons devoir également créer un nouveau template pour afficher le résultat.</p>
</div>
<div class="paragraph">
<p>Créez le template <code>register.html</code></p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/templates/register.html</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="html"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><pre><span></span><span class="tok-cp">&lt;!doctype html&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">html</span> <span class="tok-na">lang</span><span class="tok-o">=</span><span class="tok-s">&quot;en&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">head</span><span class="tok-p">&gt;</span>
 <span class="tok-c">&lt;!-- Required meta tags --&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">meta</span> <span class="tok-na">charset</span><span class="tok-o">=</span><span class="tok-s">&quot;utf-8&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">meta</span> <span class="tok-na">name</span><span class="tok-o">=</span><span class="tok-s">&quot;viewport&quot;</span> <span class="tok-na">content</span><span class="tok-o">=</span><span class="tok-s">&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">title</span><span class="tok-p">&gt;</span>Pokemon Trainer<span class="tok-p">&lt;/</span><span class="tok-nt">title</span><span class="tok-p">&gt;</span>

    <span class="tok-c">&lt;!-- Bootstrap CSS --&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">link</span> <span class="tok-na">rel</span><span class="tok-o">=</span><span class="tok-s">&quot;stylesheet&quot;</span> <span class="tok-na">href</span><span class="tok-o">=</span><span class="tok-s">&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&quot;</span> <span class="tok-na">integrity</span><span class="tok-o">=</span><span class="tok-s">&quot;sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS&quot;</span> <span class="tok-na">crossorigin</span><span class="tok-o">=</span><span class="tok-s">&quot;anonymous&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;/</span><span class="tok-nt">head</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">body</span><span class="tok-p">&gt;</span>

   <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;container&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&lt;</span><span class="tok-nt">h1</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;pt-md-5 pb-md-5&quot;</span><span class="tok-p">&gt;</span>Pokemon Trainer - Welcome {{name}}<span class="tok-p">&lt;/</span><span class="tok-nt">h1</span><span class="tok-p">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

        <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;row&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&lt;</span><span class="tok-nt">img</span>  <span class="tok-na">src</span><span class="tok-o">=</span><span class="tok-s">&quot;/images/chen.png&quot;</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;col-md-2&quot;</span><span class="tok-p">/&gt;</span>

            <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;row col-md-10&quot;</span><span class="tok-p">&gt;</span>

                <span class="tok-p">&lt;</span><span class="tok-nt">blockquote</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;blockquote&quot;</span><span class="tok-p">&gt;</span>
                    Right! So your name is {{name}}! <i class="conum" data-value="1"></i><b>(1)</b>
                    {{name}}! <i class="conum" data-value="1"></i><b>(1)</b>
                    Your very own Pokémon legend is about to unfold!
                    A world of dreams and adventures with Pokemon awaits!
                    Let&#39;s go!
                <span class="tok-p">&lt;/</span><span class="tok-nt">blockquote</span><span class="tok-p">&gt;</span>

            <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>

        <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>

    <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>


<span class="tok-c">&lt;!-- Optional JavaScript --&gt;</span>
<span class="tok-c">&lt;!-- jQuery first, then Popper.js, then Bootstrap JS --&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">script</span> <span class="tok-na">src</span><span class="tok-o">=</span><span class="tok-s">&quot;https://code.jquery.com/jquery-3.3.1.slim.min.js&quot;</span> <span class="tok-na">integrity</span><span class="tok-o">=</span><span class="tok-s">&quot;sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo&quot;</span> <span class="tok-na">crossorigin</span><span class="tok-o">=</span><span class="tok-s">&quot;anonymous&quot;</span><span class="tok-p">&gt;&lt;/</span><span class="tok-nt">script</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">script</span> <span class="tok-na">src</span><span class="tok-o">=</span><span class="tok-s">&quot;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js&quot;</span> <span class="tok-na">integrity</span><span class="tok-o">=</span><span class="tok-s">&quot;sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49&quot;</span> <span class="tok-na">crossorigin</span><span class="tok-o">=</span><span class="tok-s">&quot;anonymous&quot;</span><span class="tok-p">&gt;&lt;/</span><span class="tok-nt">script</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">script</span> <span class="tok-na">src</span><span class="tok-o">=</span><span class="tok-s">&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js&quot;</span> <span class="tok-na">integrity</span><span class="tok-o">=</span><span class="tok-s">&quot;sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy&quot;</span> <span class="tok-na">crossorigin</span><span class="tok-o">=</span><span class="tok-s">&quot;anonymous&quot;</span><span class="tok-p">&gt;&lt;/</span><span class="tok-nt">script</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;/</span><span class="tok-nt">body</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;/</span><span class="tok-nt">html</span><span class="tok-p">&gt;</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>On utilise le champ <code>name</code> du model pour alimenter notre titre et notre texte!</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ajouter_du_layouting"><a class="anchor" href="#_ajouter_du_layouting"></a><a class="link" href="#_ajouter_du_layouting">6. Ajouter du layouting</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_le_header"><a class="anchor" href="#_le_header"></a><a class="link" href="#_le_header">6.1. Le header</a></h3>
<div class="paragraph">
<p>Nous allons utiliser l&#8217;inclusion de templates pour éviter de copier/coller notre header de page sur l&#8217;ensemble de notre application !</p>
</div>
<div class="paragraph">
<p>Créez un répertoire <code>layout</code> dans <code>src/main/resources/templates</code>. Ce répertoire va nous permettre de gérer les templates
liés à la mise en page de notre application.</p>
</div>
<div class="paragraph">
<p>Dans le répertoire <code>layout</code>, créez un fichier que l&#8217;on appelera <code>header.html</code> :</p>
</div>
<div class="listingblock">
<div class="title">header.html</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="html"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><pre><span></span><span class="tok-cp">&lt;!doctype html&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">html</span> <span class="tok-na">lang</span><span class="tok-o">=</span><span class="tok-s">&quot;en&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;</span><span class="tok-nt">head</span><span class="tok-p">&gt;</span>
 <span class="tok-c">&lt;!-- Required meta tags --&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">meta</span> <span class="tok-na">charset</span><span class="tok-o">=</span><span class="tok-s">&quot;utf-8&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">meta</span> <span class="tok-na">name</span><span class="tok-o">=</span><span class="tok-s">&quot;viewport&quot;</span> <span class="tok-na">content</span><span class="tok-o">=</span><span class="tok-s">&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">title</span><span class="tok-p">&gt;</span>Pokemon Trainer<span class="tok-p">&lt;/</span><span class="tok-nt">title</span><span class="tok-p">&gt;</span>

    <span class="tok-c">&lt;!-- Bootstrap CSS --&gt;</span>
    <span class="tok-p">&lt;</span><span class="tok-nt">link</span> <span class="tok-na">rel</span><span class="tok-o">=</span><span class="tok-s">&quot;stylesheet&quot;</span> <span class="tok-na">href</span><span class="tok-o">=</span><span class="tok-s">&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&quot;</span> <span class="tok-na">integrity</span><span class="tok-o">=</span><span class="tok-s">&quot;sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS&quot;</span> <span class="tok-na">crossorigin</span><span class="tok-o">=</span><span class="tok-s">&quot;anonymous&quot;</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;/</span><span class="tok-nt">head</span><span class="tok-p">&gt;</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_linclusion"><a class="anchor" href="#_linclusion"></a><a class="link" href="#_linclusion">6.2. L&#8217;inclusion</a></h3>
<div class="paragraph">
<p>L&#8217;utilisation de notre header dans un template se fait alors avec une inclusion <code>Mustache</code>.</p>
</div>
<div class="paragraph">
<p>Modifiez vos templates pour utiliser l&#8217;inclusion :</p>
</div>
<div class="listingblock">
<div class="title">index.html</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="html"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><pre><span></span>{{&gt; layout/header}}

<span class="tok-p">&lt;</span><span class="tok-nt">body</span><span class="tok-p">&gt;</span>
    [...]
<span class="tok-p">&lt;/</span><span class="tok-nt">body</span><span class="tok-p">&gt;</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_se_connecter_aux_micro_services"><a class="anchor" href="#_se_connecter_aux_micro_services"></a><a class="link" href="#_se_connecter_aux_micro_services">7. Se connecter aux micro-services</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nous allons maintenant appeler le micro-service pokemon-type-api,
que nous avons écrit lors du <a href="https://juwit.github.io/ifi-2019/cours/03-spring/03-tp-spring.html" target="_blank" rel="noopener">TP 3</a> !.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, nous allons commencer par déployer votre TP 3 sur Heroku !</p>
</div>
<div class="sect2">
<h3 id="_déploiement_chez_heroku_du_tp_3"><a class="anchor" href="#_déploiement_chez_heroku_du_tp_3"></a><a class="link" href="#_déploiement_chez_heroku_du_tp_3">7.1. Déploiement chez Heroku du TP 3</a></h3>
<div class="paragraph">
<p>Créez un compte sur <a href="https://www.heroku.com/" target="_blank" rel="noopener">Heroku</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
vous devez créer un compte, et vous ne pouvez pas vous authentifier avec Google ou Github :(
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuration_de_votre_application"><a class="anchor" href="#_configuration_de_votre_application"></a><a class="link" href="#_configuration_de_votre_application">7.1.1. Configuration de votre application</a></h4>
<div class="paragraph">
<p>Pour supporter Java 11, Heroku nécessite l&#8217;utilisation d&#8217;un petit fichier <code>properties</code>.</p>
</div>
<div class="paragraph">
<p>Créez le fichier <code>system.properties</code> à la racine de votre TP 3 :</p>
</div>
<div class="listingblock">
<div class="title">system.properties</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="properties"><span></span><span class="tok-na">java.runtime.version</span><span class="tok-o">=</span><span class="tok-s">11</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_déploiement_de_votre_application"><a class="anchor" href="#_déploiement_de_votre_application"></a><a class="link" href="#_déploiement_de_votre_application">7.1.2. Déploiement de votre application</a></h4>
<div class="paragraph">
<p>Sur le dashboard Heroku, sélectionnez <code>New &gt; App</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/heroku-create.png" alt="heroku create">
</div>
</div>
<div class="paragraph">
<p>Saisissez le nom de votre repository Github, et la région <code>Europe</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/heroku-create-app.png" alt="heroku create app">
</div>
</div>
<div class="paragraph">
<p>Connectez votre application Heroku à votre repository Github en cliquant sur ce bouton :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/heroku-connect-github.png" alt="heroku connect github">
</div>
</div>
<div class="paragraph">
<p>Sélectionnez l&#8217;organisation <code>IFI-2019</code>, puis votre repository, puis validez en cliquant sur <code>connect</code> :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/heroku-connect-repository.png" alt="heroku connect repository">
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Vous devez avoir rejoint l&#8217;organisation Github, et avoir les droits d&#8217;admin sur votre repository pour faire cette opération. Appelez moi si ce n&#8217;est pas le cas!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une fois le repository sélectionné, vous pouvez activer les déploiements automatiques à partir d&#8217;une branche, ou effectuer vos déploiements manuellement :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/heroku-automatic-deploy.png" alt="heroku automatic deploy">
</div>
</div>
<div class="paragraph">
<p>Une fois votre application déployée, elle est disponible à l&#8217;URL : <a href="https://&lt;nom-de-votre-repository&gt;.herokuapp.com" class="bare" target="_blank" rel="noopener">https://&lt;nom-de-votre-repository&gt;.herokuapp.com</a> !</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_le_business_object"><a class="anchor" href="#_le_business_object"></a><a class="link" href="#_le_business_object">7.2. Le business object</a></h3>
<div class="paragraph">
<p>La classe du business object va être la copie de la classe du micro-service que l&#8217;on va consommer.</p>
</div>
<div class="paragraph">
<p>Nous avons donc besoin ici de trois classes (que vous pouvez copier/coller depuis votre TP 3 !) :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PokemonType: représentation d&#8217;un type de Pokemon</p>
</li>
<li>
<p>Sprites: représentation des images du Pokemon (avant et arrière)</p>
</li>
<li>
<p>Stats: représentation des statistiques du Pokemon (vitesse, attaque, défense, points de vie&#8230;&#8203;)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.pokemonTypes.bo.PokemonType</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><pre><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PokemonType</span> <span class="tok-o">{</span>

<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.pokemonTypes.bo.Sprites</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><pre><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Sprites</span> <span class="tok-o">{</span>
<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.pokemonTypes.bo.Stats</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><pre><span></span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">Stats</span> <span class="tok-o">{</span>
<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_le_service"><a class="anchor" href="#_le_service"></a><a class="link" href="#_le_service">7.3. Le service</a></h3>
<div class="sect3">
<h4 id="_linterface_pokemonservice"><a class="anchor" href="#_linterface_pokemonservice"></a><a class="link" href="#_linterface_pokemonservice">7.3.1. L&#8217;interface PokemonService</a></h4>
<div class="paragraph">
<p>Ecrire l&#8217;interface de service suivante :</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.pokemonTypes.service.PokemonTypeService</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><pre><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">PokemonTypeService</span> <span class="tok-o">{</span>

    <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">PokemonType</span><span class="tok-o">&gt;</span> <span class="tok-nf">listPokemonsTypes</span><span class="tok-o">();</span>

<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_le_test_unitaire_2"><a class="anchor" href="#_le_test_unitaire_2"></a><a class="link" href="#_le_test_unitaire_2">7.3.2. Le test unitaire</a></h4>
<div class="paragraph">
<p>Implémentez le test unitaire suivant:</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.pokemonTypes.service.PokemonTypeServiceImplTest</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><pre><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.ifi.trainer_ui.pokemonTypes.service</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">com.ifi.trainer_ui.pokemonTypes.bo.PokemonType</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.junit.jupiter.api.Test</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.stereotype.Service</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.web.client.RestTemplate</span><span class="tok-o">;</span>

<span class="tok-kn">import static</span> <span class="tok-nn">org.junit.jupiter.api.Assertions.*</span><span class="tok-o">;</span>
<span class="tok-kn">import static</span> <span class="tok-nn">org.mockito.Mockito.*</span><span class="tok-o">;</span>

<span class="tok-kd">class</span> <span class="tok-nc">PokemonTypeServiceImplTest</span> <span class="tok-o">{</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">listPokemonsTypes_shouldCallTheRemoteService</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">var</span> <span class="tok-n">url</span> <span class="tok-o">=</span> <span class="tok-s">&quot;http://localhost:8080&quot;</span><span class="tok-o">;</span>

        <span class="tok-n">var</span> <span class="tok-n">restTemplate</span> <span class="tok-o">=</span> <span class="tok-n">mock</span><span class="tok-o">(</span><span class="tok-n">RestTemplate</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>
        <span class="tok-n">var</span> <span class="tok-n">pokemonServiceImpl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">PokemonTypeServiceImpl</span><span class="tok-o">();</span>
        <span class="tok-n">pokemonServiceImpl</span><span class="tok-o">.</span><span class="tok-na">setRestTemplate</span><span class="tok-o">(</span><span class="tok-n">restTemplate</span><span class="tok-o">);</span>
        <span class="tok-n">pokemonServiceImpl</span><span class="tok-o">.</span><span class="tok-na">setPokemonTypeServiceUrl</span><span class="tok-o">(</span><span class="tok-n">url</span><span class="tok-o">);</span>

        <span class="tok-n">var</span> <span class="tok-n">pikachu</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">PokemonType</span><span class="tok-o">();</span>
        <span class="tok-n">pikachu</span><span class="tok-o">.</span><span class="tok-na">setName</span><span class="tok-o">(</span><span class="tok-s">&quot;pikachu&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">pikachu</span><span class="tok-o">.</span><span class="tok-na">setId</span><span class="tok-o">(</span><span class="tok-mi">25</span><span class="tok-o">);</span>

        <span class="tok-n">var</span> <span class="tok-n">expectedUrl</span> <span class="tok-o">=</span> <span class="tok-s">&quot;http://localhost:8080/pokemon-types&quot;</span><span class="tok-o">;</span>
        <span class="tok-n">when</span><span class="tok-o">(</span><span class="tok-n">restTemplate</span><span class="tok-o">.</span><span class="tok-na">getForObject</span><span class="tok-o">(</span><span class="tok-n">expectedUrl</span><span class="tok-o">,</span> <span class="tok-n">PokemonType</span><span class="tok-o">[].</span><span class="tok-na">class</span><span class="tok-o">)).</span><span class="tok-na">thenReturn</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">PokemonType</span><span class="tok-o">[]{</span><span class="tok-n">pikachu</span><span class="tok-o">});</span>

        <span class="tok-n">var</span> <span class="tok-n">pokemons</span> <span class="tok-o">=</span> <span class="tok-n">pokemonServiceImpl</span><span class="tok-o">.</span><span class="tok-na">listPokemonsTypes</span><span class="tok-o">();</span>

        <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">pokemons</span><span class="tok-o">);</span>
        <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-n">pokemons</span><span class="tok-o">.</span><span class="tok-na">size</span><span class="tok-o">());</span>

        <span class="tok-n">verify</span><span class="tok-o">(</span><span class="tok-n">restTemplate</span><span class="tok-o">).</span><span class="tok-na">getForObject</span><span class="tok-o">(</span><span class="tok-n">expectedUrl</span><span class="tok-o">,</span> <span class="tok-n">PokemonType</span><span class="tok-o">[].</span><span class="tok-na">class</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">pokemonServiceImpl_shouldBeAnnotatedWithService</span><span class="tok-o">(){</span>
        <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">PokemonTypeServiceImpl</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">.</span><span class="tok-na">getAnnotation</span><span class="tok-o">(</span><span class="tok-n">Service</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">));</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">setRestTemplate_shouldBeAnnotatedWithAutowired</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">NoSuchMethodException</span> <span class="tok-o">{</span>
        <span class="tok-n">var</span> <span class="tok-n">setRestTemplateMethod</span> <span class="tok-o">=</span> <span class="tok-n">PokemonTypeServiceImpl</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">.</span><span class="tok-na">getDeclaredMethod</span><span class="tok-o">(</span><span class="tok-s">&quot;setRestTemplate&quot;</span><span class="tok-o">,</span> <span class="tok-n">RestTemplate</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>
        <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">setRestTemplateMethod</span><span class="tok-o">.</span><span class="tok-na">getAnnotation</span><span class="tok-o">(</span><span class="tok-n">Autowired</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">));</span>
    <span class="tok-o">}</span>

<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_limplémentation_3"><a class="anchor" href="#_limplémentation_3"></a><a class="link" href="#_limplémentation_3">7.3.3. L&#8217;implémentation</a></h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Pour exécuter les appels au micro-service de gestion des pokemons, nous allons utiliser le <code>RestTemplate</code> de Spring.
Le <code>RestTemplate</code> de Spring fournit des méthodes simples pour exécuter des requêtes HTTP.
La librairie <code>jackson-databind</code> est utilisée pour transformer le résultat reçu (en JSON), vers notre classe de BO.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la javadoc du RestTemplate <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html" target="_blank" rel="noopener">ici</a></p>
</li>
<li>
<p>la documentation de spring qui explique le fonctionnement et l&#8217;usage du <code>RestTemplate</code> <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-client-access" target="_blank" rel="noopener">ici</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Implémentez la classe suivante :</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.pokemonTypes.service.PokemonTypeServiceImpl</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><pre><span></span><span class="tok-c1">// TODO</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PokemonTypeServiceImpl</span> <span class="tok-kd">implements</span> <span class="tok-n">PokemonTypeService</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">PokemonType</span><span class="tok-o">&gt;</span> <span class="tok-nf">listPokemonsTypes</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-c1">// TODO</span>
    <span class="tok-o">}</span>

    <span class="tok-kt">void</span> <span class="tok-nf">setRestTemplate</span><span class="tok-o">(</span><span class="tok-n">RestTemplate</span> <span class="tok-n">restTemplate</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-c1">// TODO</span>
    <span class="tok-o">}</span>

    <span class="tok-kt">void</span> <span class="tok-nf">setPokemonTypeServiceUrl</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">pokemonServiceUrl</span><span class="tok-o">)</span> <span class="tok-o">{</span>
        <span class="tok-c1">// TODO</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_le_test_dintégration"><a class="anchor" href="#_le_test_dintégration"></a><a class="link" href="#_le_test_dintégration">7.4. Le test d&#8217;intégration</a></h3>
<div class="paragraph">
<p>Nous voulons valider que notre configuration va bien fonctionner.
Pour ce faire, nous développons un test d&#8217;intégration :</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.pokemonTypes.service.PokemonTypeServiceIntegrationTest</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><pre><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.ifi.trainer_ui.pokemonTypes.service</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.junit.jupiter.api.Test</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.beans.factory.annotation.Autowired</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.boot.test.context.SpringBootTest</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.web.client.RestTemplate</span><span class="tok-o">;</span>

<span class="tok-kn">import static</span> <span class="tok-nn">org.junit.jupiter.api.Assertions.assertNotNull</span><span class="tok-o">;</span>

<span class="tok-nd">@SpringBootTest</span>
<span class="tok-kd">class</span> <span class="tok-nc">PokemonTypeServiceIntegrationTest</span> <span class="tok-o">{</span>

    <span class="tok-nd">@Autowired</span>
    <span class="tok-n">PokemonTypeService</span> <span class="tok-n">service</span><span class="tok-o">;</span>

    <span class="tok-nd">@Autowired</span>
    <span class="tok-n">RestTemplate</span> <span class="tok-n">restTemplate</span><span class="tok-o">;</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">serviceAndTemplateShouldNotBeNull</span><span class="tok-o">(){</span>
        <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">service</span><span class="tok-o">);</span>
        <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">restTemplate</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>

<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce test doit échouer ! Nous devons faire quelques ajustements pour qu&#8217;il passe.</p>
</div>
</div>
<div class="sect2">
<h3 id="_la_configuration"><a class="anchor" href="#_la_configuration"></a><a class="link" href="#_la_configuration">7.5. La configuration</a></h3>
<div class="sect3">
<h4 id="_le_resttemplate"><a class="anchor" href="#_le_resttemplate"></a><a class="link" href="#_le_resttemplate">7.5.1. Le RestTemplate</a></h4>
<div class="paragraph">
<p>Par défaut, Spring n&#8217;instancie pas de RestTemplate.</p>
</div>
<div class="paragraph">
<p>Il nous faut donc en instancier un, et l&#8217;ajouter à l'`application context` afin de le rendre disponible en injection de dépendances.</p>
</div>
<div class="paragraph">
<p>Pour ce faire, nous allons développer une simple classe de configuration :</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.config.RestConfiguration.java</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><pre><span></span><span class="tok-nd">@Configuration</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">RestConfiguration</span> <span class="tok-o">{</span>

    <span class="tok-nd">@Bean</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tok-n">RestTemplate</span> <span class="tok-nf">restTemplate</span><span class="tok-o">(){</span>
        <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">RestTemplate</span><span class="tok-o">();</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tok-o">}</span>

<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>L&#8217;annotation <code>@Configuration</code> enregistre notre classe <code>RestConfiguration</code> dans l&#8217;application context (comme <code>@Component</code>, ou <code>@Service</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>L&#8217;annotation <code>@Bean</code> permet d&#8217;annoter une méthode, dont le résultat sera enregistré comme un bean dans l' <code>application context</code> de spring.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Aves cette configuration, nos tests unitaires doivent passer !
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_linjection_des_properties"><a class="anchor" href="#_linjection_des_properties"></a><a class="link" href="#_linjection_des_properties">7.5.2. L&#8217;injection des properties</a></h4>
<div class="paragraph">
<p>Nous allons également utiliser l&#8217;injection de dépendance pour l&#8217;url d&#8217;accès au service !</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Les paramètres de configuration d&#8217;une application sont souvent injectés selon la méthode que nous allons voir !
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Modifiez le fichier <code>application.properties</code> pour y ajouter une nouvelle propriété:</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.properties</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="properties"><span></span><span class="tok-na">pokemonType.service.url</span><span class="tok-o">=</span><span class="tok-s">https://ifi-pokemon-type-api.herokuapp.com  </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Nous utilisons un paramètre indiquant à quelle URL sera disponible notre micro-service de pokemons! Utilisez l&#8217;url à laquelle votre service est déployé!</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ajoutez le test unitaire suivant au PokemonServiceImplTest</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><pre><span></span><span class="tok-nd">@Test</span>
<span class="tok-kt">void</span> <span class="tok-nf">setPokemonServiceUrl_shouldBeAnnotatedWithValue</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">NoSuchMethodException</span> <span class="tok-o">{</span>
    <span class="tok-n">var</span> <span class="tok-n">setter</span> <span class="tok-o">=</span> <span class="tok-n">PokemonTypeServiceImpl</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">.</span><span class="tok-na">getDeclaredMethod</span><span class="tok-o">(</span><span class="tok-s">&quot;setPokemonTypeServiceUrl&quot;</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>
    <span class="tok-n">var</span> <span class="tok-n">valueAnnotation</span> <span class="tok-o">=</span> <span class="tok-n">setter</span><span class="tok-o">.</span><span class="tok-na">getAnnotation</span><span class="tok-o">(</span><span class="tok-n">Value</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">valueAnnotation</span><span class="tok-o">);</span>
    <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;${pokemonType.service.url}&quot;</span><span class="tok-o">,</span> <span class="tok-n">valueAnnotation</span><span class="tok-o">.</span><span class="tok-na">value</span><span class="tok-o">());</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>On utilise une annotation <code>@Value</code> pour faire l&#8217;injection de dépendances de properties</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Une expression <code>${}</code> (spring-expression-language) est utilisée pour calculer la valeur à injecter</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Un guide intéressant sur l&#8217;injection de valeurs avec l&#8217;annotation @Value <a href="https://www.baeldung.com/spring-value-annotation">ici</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_le_controlleur"><a class="anchor" href="#_le_controlleur"></a><a class="link" href="#_le_controlleur">7.6. Le controlleur</a></h3>
<div class="paragraph">
<p>Nous allons maintenant écrire le controlleur PokemonTypeController !</p>
</div>
<div class="sect3">
<h4 id="_le_test_unitaire_3"><a class="anchor" href="#_le_test_unitaire_3"></a><a class="link" href="#_le_test_unitaire_3">7.6.1. Le test unitaire</a></h4>
<div class="paragraph">
<p>Implémentez le test unitaire suivant :</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.controller.PokemonTypeControllerTest.java</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></div></td><td class="code"><pre><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.ifi.trainer_ui.controller</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">com.ifi.trainer_ui.pokemonTypes.bo.PokemonType</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">com.ifi.trainer_ui.pokemonTypes.service.PokemonTypeService</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.junit.jupiter.api.Test</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.stereotype.Controller</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.web.bind.annotation.GetMapping</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kn">import static</span> <span class="tok-nn">org.junit.jupiter.api.Assertions.*</span><span class="tok-o">;</span>
<span class="tok-kn">import static</span> <span class="tok-nn">org.mockito.Mockito.*</span><span class="tok-o">;</span>

<span class="tok-kd">class</span> <span class="tok-nc">PokemonTypeControllerTest</span> <span class="tok-o">{</span>
    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">controllerShouldBeAnnotated</span><span class="tok-o">(){</span>
        <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">PokemonTypeController</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">.</span><span class="tok-na">getAnnotation</span><span class="tok-o">(</span><span class="tok-n">Controller</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">));</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">pokemons_shouldReturnAModelAndView</span><span class="tok-o">()</span> <span class="tok-o">{</span>
        <span class="tok-n">var</span> <span class="tok-n">pokemonTypeService</span> <span class="tok-o">=</span> <span class="tok-n">mock</span><span class="tok-o">(</span><span class="tok-n">PokemonTypeService</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>

        <span class="tok-n">when</span><span class="tok-o">(</span><span class="tok-n">pokemonTypeService</span><span class="tok-o">.</span><span class="tok-na">listPokemonsTypes</span><span class="tok-o">()).</span><span class="tok-na">thenReturn</span><span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">PokemonType</span><span class="tok-o">(),</span> <span class="tok-k">new</span> <span class="tok-n">PokemonType</span><span class="tok-o">()));</span>

        <span class="tok-n">var</span> <span class="tok-n">pokemonTypeController</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">PokemonTypeController</span><span class="tok-o">();</span>
        <span class="tok-n">pokemonTypeController</span><span class="tok-o">.</span><span class="tok-na">setPokemonTypeService</span><span class="tok-o">(</span><span class="tok-n">pokemonTypeService</span><span class="tok-o">);</span>
        <span class="tok-n">var</span> <span class="tok-n">modelAndView</span> <span class="tok-o">=</span> <span class="tok-n">pokemonTypeController</span><span class="tok-o">.</span><span class="tok-na">pokedex</span><span class="tok-o">();</span>

        <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-s">&quot;pokedex&quot;</span><span class="tok-o">,</span> <span class="tok-n">modelAndView</span><span class="tok-o">.</span><span class="tok-na">getViewName</span><span class="tok-o">());</span>
        <span class="tok-n">var</span> <span class="tok-n">pokemons</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">PokemonType</span><span class="tok-o">&gt;)</span><span class="tok-n">modelAndView</span><span class="tok-o">.</span><span class="tok-na">getModel</span><span class="tok-o">().</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-s">&quot;pokemonTypes&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">assertEquals</span><span class="tok-o">(</span><span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-n">pokemons</span><span class="tok-o">.</span><span class="tok-na">size</span><span class="tok-o">());</span>
        <span class="tok-n">verify</span><span class="tok-o">(</span><span class="tok-n">pokemonTypeService</span><span class="tok-o">).</span><span class="tok-na">listPokemonsTypes</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Test</span>
    <span class="tok-kt">void</span> <span class="tok-nf">pokemons_shouldBeAnnotated</span><span class="tok-o">()</span> <span class="tok-kd">throws</span> <span class="tok-n">NoSuchMethodException</span> <span class="tok-o">{</span>
        <span class="tok-n">var</span> <span class="tok-n">pokemonsMethod</span> <span class="tok-o">=</span> <span class="tok-n">PokemonTypeController</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">.</span><span class="tok-na">getDeclaredMethod</span><span class="tok-o">(</span><span class="tok-s">&quot;pokedex&quot;</span><span class="tok-o">);</span>
        <span class="tok-n">var</span> <span class="tok-n">getMapping</span> <span class="tok-o">=</span> <span class="tok-n">pokemonsMethod</span><span class="tok-o">.</span><span class="tok-na">getAnnotation</span><span class="tok-o">(</span><span class="tok-n">GetMapping</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>

        <span class="tok-n">assertNotNull</span><span class="tok-o">(</span><span class="tok-n">getMapping</span><span class="tok-o">);</span>
        <span class="tok-n">assertArrayEquals</span><span class="tok-o">(</span><span class="tok-k">new</span> <span class="tok-n">String</span><span class="tok-o">[]{</span><span class="tok-s">&quot;/pokedex&quot;</span><span class="tok-o">},</span> <span class="tok-n">getMapping</span><span class="tok-o">.</span><span class="tok-na">value</span><span class="tok-o">());</span>
    <span class="tok-o">}</span>


<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_limplémentation_4"><a class="anchor" href="#_limplémentation_4"></a><a class="link" href="#_limplémentation_4">7.6.2. L&#8217;implémentation</a></h4>
<div class="paragraph">
<p>Implémentez le controlleur :</p>
</div>
<div class="listingblock">
<div class="title">com.ifi.trainer_ui.controller.PokemonTypeController.java</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="java"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><pre><span></span><span class="tok-c1">// TODO</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">PokemonTypeController</span> <span class="tok-o">{</span>

    <span class="tok-c1">// TODO</span>
    <span class="tok-kd">public</span> <span class="tok-n">ModelAndView</span> <span class="tok-nf">pokedex</span><span class="tok-o">(){</span>
        <span class="tok-c1">// TODO</span>
    <span class="tok-o">}</span>

<span class="tok-o">}</span>
</pre></td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_le_template"><a class="anchor" href="#_le_template"></a><a class="link" href="#_le_template">7.6.3. Le template</a></h4>
<div class="paragraph">
<p>Nous allons créer une petite page qui va afficher pour chaque type de pokémon son nom, son image, ainsi que ses statistiques</p>
</div>
<div class="paragraph">
<p>Créer le template suivant :</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/templates/pokedex.html</div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="html"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><pre><span></span>{{&gt; layout/header}}

<span class="tok-p">&lt;</span><span class="tok-nt">body</span><span class="tok-p">&gt;</span>

    <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;container&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&lt;</span><span class="tok-nt">h1</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;pt-md-5 pb-md-5&quot;</span><span class="tok-p">&gt;</span>Pokedex<span class="tok-p">&lt;/</span><span class="tok-nt">h1</span><span class="tok-p">&gt;</span>

        <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;card-deck&quot;</span><span class="tok-p">&gt;</span>
            {{#pokemonTypes}} <i class="conum" data-value="1"></i><b>(1)</b>
            <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;col-md-3&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;card shadow-sm mb-3&quot;</span><span class="tok-p">&gt;</span>
                    <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;card-header&quot;</span><span class="tok-p">&gt;</span>
                        <span class="tok-p">&lt;</span><span class="tok-nt">h4</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;my-0 font-weight-normal&quot;</span><span class="tok-p">&gt;</span>{{name}} <i class="conum" data-value="2"></i><b>(2)</b>
                            <span class="tok-p">&lt;</span><span class="tok-nt">span</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;badge badge-secondary&quot;</span><span class="tok-p">&gt;</span>Id {{}} <span class="tok-c">&lt;!--3--&gt;</span><span class="tok-p">&lt;/</span><span class="tok-nt">span</span><span class="tok-p">&gt;</span>
                        <span class="tok-p">&lt;/</span><span class="tok-nt">h4</span><span class="tok-p">&gt;</span>
                    <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>
                    <span class="tok-p">&lt;</span><span class="tok-nt">img</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;card-img-top&quot;</span> <span class="tok-na">src</span><span class="tok-o">=</span><span class="tok-s">&quot;{{}}&quot;</span> <span class="tok-na">alt</span><span class="tok-o">=</span><span class="tok-s">&quot;Pokemon&quot;</span><span class="tok-p">/&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>

                    <span class="tok-p">&lt;</span><span class="tok-nt">div</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;card-body&quot;</span><span class="tok-p">&gt;</span>
                        <span class="tok-p">&lt;</span><span class="tok-nt">span</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;badge badge-primary&quot;</span><span class="tok-p">&gt;</span>Speed : {{}}<span class="tok-p">&lt;/</span><span class="tok-nt">span</span><span class="tok-p">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
                        <span class="tok-p">&lt;</span><span class="tok-nt">span</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;badge badge-primary&quot;</span><span class="tok-p">&gt;</span>Attack : {{}}<span class="tok-p">&lt;/</span><span class="tok-nt">span</span><span class="tok-p">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
                        <span class="tok-p">&lt;</span><span class="tok-nt">span</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;badge badge-primary&quot;</span><span class="tok-p">&gt;</span>Defense : {{}}<span class="tok-p">&lt;/</span><span class="tok-nt">span</span><span class="tok-p">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
                        <span class="tok-p">&lt;</span><span class="tok-nt">span</span> <span class="tok-na">class</span><span class="tok-o">=</span><span class="tok-s">&quot;badge badge-primary&quot;</span><span class="tok-p">&gt;</span>HP : {{}}<span class="tok-p">&lt;/</span><span class="tok-nt">span</span><span class="tok-p">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
                    <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>
                <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>
            {{/pokemonTypes}}
        <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>

    <span class="tok-p">&lt;/</span><span class="tok-nt">div</span><span class="tok-p">&gt;</span>

<span class="tok-p">&lt;/</span><span class="tok-nt">body</span><span class="tok-p">&gt;</span>
<span class="tok-p">&lt;/</span><span class="tok-nt">html</span><span class="tok-p">&gt;</span>
</pre></td></tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Voici comment on itère sur une liste !</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>On affiche quelques valeurs</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>à compléter</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pour_aller_plus_loin"><a class="anchor" href="#_pour_aller_plus_loin"></a><a class="link" href="#_pour_aller_plus_loin">8. Pour aller plus loin</a></h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Affichez sur le pokedex les types de chaque Pokemon (plante, electrique&#8230;&#8203;)</p>
</li>
<li>
<p>Affichez sur le pokedex les images "vues de derrière"</p>
</li>
<li>
<p>Développez une page web qui affiche la liste des dresseurs de pokemons</p>
</li>
<li>
<p>Développez une page qui affiche le détail d&#8217;un dresseur de pokemon :</p>
<div class="ulist">
<ul>
<li>
<p>son nom</p>
</li>
<li>
<p>son équipe</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-11-21 08:29:06 +0100
</div>
</div>
<style>
pre.pygments .hll { background-color: #ffffcc }
pre.pygments  { background: #f8f8f8; }
pre.pygments .tok-c { color: #408080; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #FF0000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
pre.pygments .tok-go { color: #888888 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #7D9029 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #A0A000 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</body>
</html>